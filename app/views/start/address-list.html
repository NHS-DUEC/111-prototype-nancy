{% extends '_layouts/layout.html' %}

{% block page_title %}{% endblock %}

{% block body_css_classes %}nhs-redesign{% endblock %}

{% block content %}

<div class="content-block measure">
  <!--<a href="/start/address-search" class="button-back">Back</a>-->

  {% if session.addressResults.length === 1 %}
    <h1 class="h2">Confirm address</h1>
  {% else %}
    <h1 class="h2">Pick address</h1>
  {% endif %}
  {% if message %}
    <div class="callout callout--info">
      <p>{{ message | safe }}</p>
    </div>
  {% endif %}
</div>

<div class="address-listing">

  {% for address in session.addressResults %}
    {% set addressString  = '' %}
    {% for addressLine in address %}
      {% if addressLine !== '' %}
        {% if loop.first == false %}
          {% set addressString  = addressString + ', ' %}
        {% endif %}
        {% set addressString  = addressString + addressLine %}
      {% endif %}
    {% endfor %}
    {% set addressString  = addressString + ', ' + session.addressPostcode %}
    <a href="/start/handle-address?str={{ addressString | urlencode }}" class="address">
      {{ addressString }}
    </a>
  {% endfor %}

</div>

<div class="content-seperator content-seperator--equalvertspacing--large"></div>

<div class="content-block measure">
  <p><a href="/start/manual-address">The address I’m at isn’t listed</a></p>
</div>

{% endblock %}
